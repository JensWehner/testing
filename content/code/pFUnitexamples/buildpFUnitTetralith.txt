# Installation of pFUnit and pFUnit_demos on tetralith

# Load the environment
module add git/2.19.3-nsc1-gcc-system
module add CMake/3.16.4-nsc1
export FC=/software/sse/manual/mpprun/4.1.3/nsc-wrappers/ifort

# Clone the pFUnit repository
git clone --recursive git@github.com:Goddard-Fortran-Ecosystem/pFUnit.git
cd pFUnit

# Configure with Cmake
mkdir build
cd build
cmake -DMPI=YES -DOPENMP=YES -DCMAKE_INSTALL_PREFIX=./installed ../

# Build and install to local directory 'installed'
make -j tests
make install

# Clone the pFUnit_demos repository
git clone git@github.com:Goddard-Fortran-Ecosystem/pFUnit_demos.git

# Try out the Trivial, Basic, and MPI examples
cd pFUnit_demos
export PFUNIT_DIR=~pFUnit/build/installed/PFUNIT-4.2
cd Trivial
./build_with_cmake_and_run.x
cd ../Basic
./build_with_cmake_and_run.x
cd ../MPI
./build_with_cmake_and_run.x
